# 🚀 云端部署完整指南

## 📋 部署前准备

### 1. 代码准备
- [ ] 修复所有已知bug
- [ ] 创建GitHub仓库
- [ ] 上传代码到仓库
- [ ] 编写详细的README

### 2. 选择部署方案

#### 方案A：Streamlit Cloud（推荐新手）
**成本**：免费
**适合**：2-5人小团队
**时间**：30分钟

#### 方案B：云服务器（推荐生产）
**成本**：¥200-500/月
**适合**：专业使用
**时间**：2-3小时

## 🎯 Streamlit Cloud部署（推荐）

### 步骤1：准备GitHub仓库
```bash
# 在项目目录下执行
git init
git add .
git commit -m "私募基金净值管理系统v1.0"

# 在GitHub创建仓库后
git remote add origin https://github.com/你的用户名/fund-management.git
git push -u origin main
```

### 步骤2：部署到Streamlit Cloud
1. 访问 [share.streamlit.io](https://share.streamlit.io)
2. 使用GitHub账户登录
3. 点击 "New app"
4. 选择你的仓库
5. 设置：
   - **Main file path**: `app.py`
   - **Python version**: `3.9`
6. 点击 "Deploy!"

### 步骤3：配置域名（可选）
- 获得类似 `https://your-app-name.streamlit.app` 的访问地址
- 可以自定义子域名
- 分享给合伙人使用

## 🔧 云服务器部署（进阶）

### 步骤1：购买云服务器
**推荐配置**：
- CPU: 2核
- 内存: 4GB
- 硬盘: 40GB SSD
- 带宽: 5Mbps
- 系统: Ubuntu 20.04

### 步骤2：域名和SSL
```bash
# 购买域名（可选）
# 推荐：阿里云、腾讯云、Cloudflare

# 配置DNS解析
# A记录：你的域名 -> 服务器IP

# 安装SSL证书（免费）
sudo apt install certbot python3-certbot-nginx
sudo certbot --nginx -d your-domain.com
```

### 步骤3：运行部署脚本
```bash
# 上传部署脚本到服务器
scp 部署脚本.sh user@your-server-ip:~/

# 在服务器上执行
chmod +x 部署脚本.sh
./部署脚本.sh
```

## 🔒 安全配置

### 1. 用户认证（推荐）
```python
# 在app.py中添加简单认证
import streamlit_authenticator as stauth

# 配置用户列表
names = ['张三', '李四']
usernames = ['zhangsan', 'lisi']
passwords = ['password123', 'password456']

# 创建认证器
authenticator = stauth.Authenticate(names, usernames, passwords, 'fund_management', 'abcdef')

# 添加登录组件
name, authentication_status, username = authenticator.login('登录', 'main')
```

### 2. 数据备份
```bash
# 每日自动备份数据库
crontab -e

# 添加定时任务（每天凌晨2点备份）
0 2 * * * /usr/bin/cp /var/www/fund-management/fund_management.db /var/backups/fund_db_$(date +\%Y\%m\%d).db
```

## 🚀 Docker部署（专业版）

### 使用Docker Compose
```bash
# 构建并启动服务
docker-compose up -d

# 查看状态
docker-compose ps

# 查看日志
docker-compose logs -f
```

## 📊 监控和维护

### 1. 系统监控
```bash
# 查看应用状态
sudo systemctl status fund-management

# 查看日志
sudo journalctl -u fund-management -f

# 重启服务
sudo systemctl restart fund-management
```

### 2. 数据库备份策略
- **每日备份**：保留30天
- **每周备份**：保留12周
- **每月备份**：保留12个月

## 💡 多人协作建议

### 1. 权限管理
- 管理员：所有功能
- 操作员：录入数据
- 查看者：只读权限

### 2. 数据同步
- 实时同步：多人同时使用
- 版本控制：重要数据变更记录
- 冲突解决：先到先得原则

### 3. 使用规范
- 固定时间录入净值（如每周五）
- 重要操作需要二次确认
- 定期导出数据备份

## 🎯 成本估算

### Streamlit Cloud方案
- 部署成本：¥0
- 维护成本：¥0/月
- 总计：完全免费

### 云服务器方案
- 服务器：¥200-400/月
- 域名：¥60/年
- SSL证书：免费
- 总计：¥200-400/月

## 📞 技术支持

部署过程中如遇问题：
1. 检查错误日志
2. 参考官方文档
3. 联系技术支持

---

选择适合您团队的方案，开始云端协作吧！
